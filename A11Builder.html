<html class="dark" lang="en">

<head>
    <meta charset="utf-8" />
    <meta content="width=device-width, initial-scale=1.0" name="viewport" />
    <title>Dynamic Course Builder</title>
    <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;900&amp;display=swap"
        rel="stylesheet" />
    <link
        href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:wght,FILL@100..700,0..1&amp;display=swap"
        rel="stylesheet" />
    <script id="tailwind-config">
        tailwind.config = {
            darkMode: "class",
            theme: {
                extend: {
                    colors: {
                        primary: "#3b82f6", // blue-500
                        "primary-hover": "#2563eb", // blue-600
                        "dark-bg": "#0f172a", // slate-900
                        "dark-card": "#1e293b", // slate-800
                        "dark-surface": "#334155", // slate-700
                    },
                    fontFamily: {
                        sans: ["Inter", "sans-serif"]
                    },
                    animation: {
                        blob: "blob 7s infinite",
                        'fade-in-up': 'fadeInUp 0.5s ease-out forwards',
                        'pulse-slow': 'pulse 3s cubic-bezier(0.4, 0, 0.6, 1) infinite',
                        'float': 'float 6s ease-in-out infinite',
                    },
                    keyframes: {
                        blob: {
                            "0%": { transform: "translate(0px, 0px) scale(1)" },
                            "33%": { transform: "translate(30px, -50px) scale(1.1)" },
                            "66%": { transform: "translate(-20px, 20px) scale(0.9)" },
                            "100%": { transform: "translate(0px, 0px) scale(1)" },
                        },
                        fadeInUp: {
                            '0%': { opacity: '0', transform: 'translateY(10px)' },
                            '100%': { opacity: '1', transform: 'translateY(0)' },
                        },
                        float: {
                            '0%, 100%': { transform: 'translateY(0)' },
                            '50%': { transform: 'translateY(-10px)' },
                        }
                    },
                },
            },
        }
    </script>
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }

        .glass-effect {
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
        }

        .custom-scrollbar::-webkit-scrollbar {
            width: 6px;
        }

        .custom-scrollbar::-webkit-scrollbar-track {
            background: transparent;
        }

        .custom-scrollbar::-webkit-scrollbar-thumb {
            background-color: #cbd5e1;
            border-radius: 20px;
        }

        .dark .custom-scrollbar::-webkit-scrollbar-thumb {
            background-color: #475569;
        }

        .filled {
            font-variation-settings: 'FILL' 1, 'wght' 400, 'GRAD' 0, 'opsz' 24;
        }

        .sidebar-dropdown {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease-out;
        }

        .group:hover .sidebar-dropdown {
            max-height: 200px;
        }

        .canvas-bg {
            background-image: radial-gradient(#94a3b8 1px, transparent 1px);
            background-size: 24px 24px;
        }

        .dark .canvas-bg {
            background-image: radial-gradient(#334155 1px, transparent 1px);
        }

        .module-card {
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .module-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px -5px rgb(0 0 0 / 0.1), 0 8px 10px -6px rgb(0 0 0 / 0.1);
        }

        .branch-node::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 100%;
            width: 4rem;
            height: 2px;
            background-color: #cbd5e1;
            transform: translateY(-50%);
            z-index: 0;
        }

        .dark .branch-node::after {
            background-color: #334155;
        }

        .branch-node:last-child::after {
            display: none;
        }

        .module-content {
            display: grid;
            grid-template-rows: 0fr;
            transition: grid-template-rows 0.4s ease-out;
        }

        .module-card.expanded .module-content {
            grid-template-rows: 1fr;
        }

        .drag-handle {
            cursor: grab;
        }

        .drag-handle:active {
            cursor: grabbing;
        }

        summary::-webkit-details-marker {
            display: none;
        }
    </style>
</head>

<body
    class="bg-slate-50 dark:bg-dark-bg text-slate-900 dark:text-slate-100 transition-colors duration-200 antialiased selection:bg-primary/20 selection:text-primary overflow-hidden">

    <div class="flex h-screen w-full overflow-hidden">
        <aside
            class="w-64 bg-white dark:bg-dark-card border-r border-slate-200 dark:border-slate-800 hidden lg:flex flex-col z-30 shrink-0 h-full relative shadow-sm">
            <div class="p-6 flex items-center gap-2 border-b border-slate-100 dark:border-slate-800/50">
                <div
                    class="size-8 rounded-lg bg-gradient-to-br from-blue-600 to-indigo-600 text-white flex items-center justify-center shadow-lg shadow-blue-500/20 group cursor-pointer hover:scale-110 transition-transform">
                    <span class="material-symbols-outlined text-[20px]">auto_awesome</span>
                </div>
                <h2 class="text-lg font-bold tracking-tight text-slate-900 dark:text-white">TECH-PRO AI</h2>
            </div>
            <nav class="flex-1 overflow-y-auto px-4 py-6 space-y-2">
                <a class="flex items-center gap-3 px-3 py-2.5 rounded-lg text-slate-600 hover:bg-slate-50 hover:text-slate-900 dark:text-slate-400 dark:hover:bg-slate-800 dark:hover:text-white transition-all"
                    href="#">
                    <span class="material-symbols-outlined">dashboard</span>
                    Dashboard
                </a>
                <div class="group relative">
                    <!-- <a class="flex items-center justify-between gap-3 px-3 py-2.5 rounded-lg bg-blue-50 text-blue-600 dark:bg-blue-900/20 dark:text-blue-400 font-medium transition-all cursor-pointer"
                        href="#">
                        <div class="flex items-center gap-3">
                            <span class="material-symbols-outlined filled">library_books</span>
                            My Courses
                        </div>
                        <span class="material-symbols-outlined text-sm">expand_more</span>
                    </a> -->
                    <!-- <div class="sidebar-dropdown pl-10 space-y-1" style="max-height: 200px;">
                        <a class="block py-1.5 text-xs text-blue-600 font-semibold dark:text-blue-400 transition-colors flex items-center justify-between"
                            href="#">
                            Adv. AI Architecture
                            <span class="size-1.5 rounded-full bg-blue-500 animate-pulse"></span>
                        </a>
                        <a class="block py-1.5 text-xs text-slate-500 hover:text-blue-600 dark:text-slate-400 dark:hover:text-blue-400 transition-colors"
                            href="#">Python for Data</a>
                        <a class="block py-1.5 text-xs text-slate-500 hover:text-blue-600 dark:text-slate-400 dark:hover:text-blue-400 transition-colors"
                            href="#">Enterprise Leadership</a>
                    </div> -->
                </div>
                <a href="A14Student.html" target="_blank"
                    class="flex items-center gap-3 px-3 py-2.5 rounded-lg text-slate-600 hover:bg-slate-50 hover:text-slate-900 dark:text-slate-400 dark:hover:bg-slate-800 dark:hover:text-white transition-colors group"
                    href="#">
                    <span class="material-symbols-outlined group-hover:text-purple-500 transition-colors">groups</span>
                    Students
                </a>
                <a href="A17Analytics.html" target="_blank"
                    class="flex items-center gap-3 px-3 py-2.5 rounded-lg text-slate-600 hover:bg-slate-50 hover:text-slate-900 dark:text-slate-400 dark:hover:bg-slate-800 dark:hover:text-white transition-colors group"
                    href="#">
                    <span
                        class="material-symbols-outlined group-hover:text-orange-500 transition-colors">bar_chart</span>
                    Analytics
                </a>
                <div class="group relative">
                    <a class="flex items-center gap-3 px-3 py-2.5 rounded-lg text-slate-600 hover:bg-slate-50 hover:text-slate-900 dark:text-slate-400 dark:hover:bg-slate-800 dark:hover:text-white transition-colors cursor-pointer"
                        href="#">
                        <span
                            class="material-symbols-outlined group-hover:text-green-500 transition-colors">forum</span>
                        Discussions
                    </a>
                </div>
            </nav>
            <div class="p-4 border-t border-slate-100 dark:border-slate-800/50">
                <h3 class="text-xs font-bold text-slate-400 uppercase tracking-wider mb-3 px-2">Builder Tools</h3>
                <div class="space-y-2 relative">
                    <details class="group w-full relative">
                        <summary
                            class="list-none w-full flex items-center justify-between px-3 py-2 bg-indigo-50 text-indigo-600 dark:bg-indigo-900/20 dark:text-indigo-400 rounded-lg text-sm font-medium transition-colors border border-indigo-100 dark:border-indigo-800 cursor-pointer hover:bg-indigo-100 dark:hover:bg-indigo-900/40">
                            <div class="flex items-center gap-2">
                                <span class="material-symbols-outlined text-[18px]">settings_suggest</span>
                                <span>Course Settings</span>
                            </div>
                            <span
                                class="material-symbols-outlined text-[16px] transition-transform duration-200 group-open:rotate-180">expand_more</span>
                        </summary>
                        <div
                            class="absolute left-0 right-0 top-full mt-2 w-full bg-white dark:bg-dark-card border border-slate-200 dark:border-slate-700 rounded-lg shadow-xl shadow-slate-200/50 dark:shadow-black/40 z-50 overflow-hidden animate-fade-in-up">
                            <a href="ExamBuilder.html"
                                class="flex items-center gap-3 px-3 py-2.5 text-slate-600 dark:text-slate-300 hover:bg-indigo-50 dark:hover:bg-indigo-900/30 hover:text-indigo-600 dark:hover:text-indigo-400 transition-colors border-b border-slate-100 dark:border-slate-800/50 group/item"
                                href="A12Asses.html">
                                <span
                                    class="material-symbols-outlined text-[18px] group-hover/item:text-indigo-500 transition-colors">assignment</span>
                                <span class="font-medium text-xs">Assessment Builder</span>
                            </a>
                            <a href="ExamBuilder.html"
                                class="flex items-center gap-3 px-3 py-2.5 text-slate-600 dark:text-slate-300 hover:bg-indigo-50 dark:hover:bg-indigo-900/30 hover:text-indigo-600 dark:hover:text-indigo-400 transition-colors group/item"
                                href="A12Asses.html">
                                <span
                                    class="material-symbols-outlined text-[18px] group-hover/item:text-indigo-500 transition-colors">edit_note</span>
                                <span class="font-medium text-xs">Exam Builder</span>
                            </a>
                        </div>
                    </details>
                </div>
            </div>
            <div class="p-4">
                <div
                    class="flex items-center gap-3 p-3 rounded-xl bg-slate-50 dark:bg-slate-800 border border-slate-100 dark:border-slate-700/50 cursor-pointer">
                    <div
                        class="size-9 rounded-full bg-gradient-to-br from-indigo-500 to-purple-600 text-white flex items-center justify-center text-sm font-bold shadow-sm">
                        AM
                    </div>
                    <div class="flex-1 min-w-0">
                        <p class="text-sm font-semibold text-slate-900 dark:text-white truncate">Alex Morgan</p>
                        <p class="text-xs text-slate-500 dark:text-slate-400 truncate">Senior Instructor</p>
                    </div>
                </div>
            </div>
        </aside>
        <div class="flex-1 flex flex-col h-full overflow-hidden relative bg-slate-50 dark:bg-dark-bg">
            <div class="fixed inset-0 z-0 pointer-events-none overflow-hidden">
                <div
                    class="absolute top-[10%] left-[30%] w-[600px] h-[600px] bg-blue-400/10 dark:bg-blue-600/5 rounded-full blur-[120px]">
                </div>
            </div>
            <header
                class="h-16 shrink-0 bg-white/90 dark:bg-dark-bg/90 backdrop-blur-md border-b border-slate-200 dark:border-slate-800 flex items-center justify-between px-6 z-20">
                <div class="flex items-center gap-4">
                    <div class="lg:hidden">
                        <button class="p-2 -ml-2 text-slate-600 dark:text-slate-300">
                            <span class="material-symbols-outlined">menu</span>
                        </button>
                    </div>
                    <div class="flex flex-col">
                        <div class="flex items-center gap-2">
                            <h1 class="text-lg font-bold text-slate-900 dark:text-white">Advanced AI Architecture</h1>
                            <span
                                class="px-2 py-0.5 rounded text-[10px] font-bold bg-amber-100 text-amber-700 dark:bg-amber-900/30 dark:text-amber-400 border border-amber-200 dark:border-amber-800">DRAFT</span>
                        </div>
                        <p class="text-xs text-slate-500 dark:text-slate-400 flex items-center gap-1">
                            Last saved 2 mins ago <span
                                class="size-1 rounded-full bg-slate-300 dark:bg-slate-600"></span> V 1.2.4
                        </p>
                    </div>
                </div>
                <div class="flex items-center gap-3">
                    <div
                        class="hidden md:flex items-center gap-2 mr-4 text-xs font-medium text-slate-500 dark:text-slate-400 bg-slate-100 dark:bg-slate-800/50 p-1 rounded-lg">
                        <button id="btn-build"
                            class="px-3 py-1.5 bg-white dark:bg-dark-card shadow-sm rounded-md text-slate-900 dark:text-white hover:bg-slate-100 hover:text-blue-600 transition-colors">Build</button>
                        <button
                            class="px-3 py-1.5 hover:text-slate-900 dark:hover:text-white transition-colors">Preview</button>
                        <button
                            class="px-3 py-1.5 hover:text-slate-900 dark:hover:text-white transition-colors">Settings</button>
                    </div>
                    <button
                        class="px-4 py-2 bg-slate-900 dark:bg-white text-white dark:text-slate-900 text-sm font-semibold rounded-lg shadow-lg hover:shadow-xl transition-all flex items-center gap-2 btn-publish">
                        <span class="material-symbols-outlined text-[18px]">publish</span>
                        Publish
                    </button>
                </div>
            </header>
            <main class="flex-1 flex flex-col overflow-hidden relative z-10">
                <div
                    class="h-24 border-b border-slate-200 dark:border-slate-800 bg-white/50 dark:bg-dark-card/50 backdrop-blur-sm shrink-0 flex items-center px-8 gap-8 overflow-x-auto custom-scrollbar">
                    <div class="text-xs font-bold text-slate-400 uppercase tracking-wider shrink-0 mr-4">
                        Project<br />Timeline</div>
                    <div class="flex items-center gap-16 min-w-max">
                        <div class="relative branch-node group cursor-pointer">
                            <div class="flex flex-col items-center gap-2 relative z-10">
                                <div
                                    class="size-3 rounded-full bg-slate-300 dark:bg-slate-600 ring-4 ring-white dark:ring-dark-bg transition-all group-hover:scale-125">
                                </div>
                                <div class="text-center opacity-50 group-hover:opacity-100 transition-opacity">
                                    <p class="text-xs font-bold text-slate-700 dark:text-slate-200">v1.0 Live</p>
                                    <p class="text-[10px] text-slate-400">2 weeks ago</p>
                                </div>
                            </div>
                        </div>
                        <div class="relative branch-node group cursor-pointer">
                            <div class="flex flex-col items-center gap-2 relative z-10">
                                <div
                                    class="size-3 rounded-full bg-blue-500 ring-4 ring-white dark:ring-dark-bg ring-offset-2 ring-offset-blue-50 dark:ring-offset-blue-900 transition-all group-hover:scale-125">
                                </div>
                                <div class="text-center">
                                    <p class="text-xs font-bold text-blue-600 dark:text-blue-400">v1.1 Draft</p>
                                    <p class="text-[10px] text-slate-400">Current Editing</p>
                                </div>
                            </div>
                            <div
                                class="absolute top-1/2 left-full w-16 h-[2px] bg-dashed border-t-2 border-slate-300 dark:border-slate-600 -translate-y-1/2 origin-left -rotate-12 hidden">
                            </div>
                        </div>
                        <div
                            class="relative branch-node group cursor-pointer opacity-60 hover:opacity-100 transition-opacity">
                            <div class="flex flex-col items-center gap-2 relative z-10">
                                <div
                                    class="size-3 rounded-full border-2 border-dashed border-purple-400 bg-white dark:bg-dark-bg ring-4 ring-white dark:ring-dark-bg transition-all group-hover:scale-125">
                                </div>
                                <div class="text-center">
                                    <p class="text-xs font-bold text-slate-600 dark:text-slate-300">v1.2 Feature</p>
                                    <p class="text-[10px] text-slate-400">Planned</p>
                                </div>
                            </div>
                        </div>
                        <button id="btn-add-module-link"
                            class="ml-4 flex items-center gap-1 text-xs font-medium text-slate-500 hover:text-blue-600 dark:text-slate-400 dark:hover:text-blue-400 transition-colors border border-dashed border-slate-300 dark:border-slate-600 rounded-full px-3 py-1">
                            <span class="material-symbols-outlined text-[14px]">add_circle</span>
                            New Branch
                        </button>
                    </div>
                </div>
                <div class="flex-1 relative flex overflow-hidden">
                    <div
                        class="w-16 bg-white dark:bg-dark-card border-r border-slate-200 dark:border-slate-800 flex flex-col items-center py-6 gap-6 z-20 shrink-0 shadow-lg">
                        <div class="tooltip-trigger relative group">
                            <button
                                class="size-10 rounded-xl bg-slate-50 dark:bg-slate-700 text-slate-600 dark:text-slate-300 hover:bg-blue-50 dark:hover:bg-blue-900/30 hover:text-blue-600 dark:hover:text-blue-400 transition-all hover:scale-110 flex items-center justify-center border border-slate-200 dark:border-slate-600 shadow-sm">
                                <span class="material-symbols-outlined">description</span>
                            </button>
                            <span
                                class="absolute left-full top-1/2 -translate-y-1/2 ml-3 px-2 py-1 bg-slate-900 text-white text-xs rounded opacity-0 group-hover:opacity-100 pointer-events-none transition-opacity whitespace-nowrap z-50">Add
                                Text</span>
                        </div>
                        <div class="tooltip-trigger relative group">
                            <button
                                class="size-10 rounded-xl bg-slate-50 dark:bg-slate-700 text-slate-600 dark:text-slate-300 hover:bg-purple-50 dark:hover:bg-purple-900/30 hover:text-purple-600 dark:hover:text-purple-400 transition-all hover:scale-110 flex items-center justify-center border border-slate-200 dark:border-slate-600 shadow-sm">
                                <span class="material-symbols-outlined">smart_display</span>
                            </button>
                            <span
                                class="absolute left-full top-1/2 -translate-y-1/2 ml-3 px-2 py-1 bg-slate-900 text-white text-xs rounded opacity-0 group-hover:opacity-100 pointer-events-none transition-opacity whitespace-nowrap z-50">Add
                                Video</span>
                        </div>
                        <div class="tooltip-trigger relative group">
                            <button
                                class="size-10 rounded-xl bg-slate-50 dark:bg-slate-700 text-slate-600 dark:text-slate-300 hover:bg-green-50 dark:hover:bg-green-900/30 hover:text-green-600 dark:hover:text-green-400 transition-all hover:scale-110 flex items-center justify-center border border-slate-200 dark:border-slate-600 shadow-sm">
                                <span class="material-symbols-outlined">quiz</span>
                            </button>
                            <span
                                class="absolute left-full top-1/2 -translate-y-1/2 ml-3 px-2 py-1 bg-slate-900 text-white text-xs rounded opacity-0 group-hover:opacity-100 pointer-events-none transition-opacity whitespace-nowrap z-50">Add
                                Quiz</span>
                        </div>
                        <div class="tooltip-trigger relative group">
                            <button
                                class="size-10 rounded-xl bg-slate-50 dark:bg-slate-700 text-slate-600 dark:text-slate-300 hover:bg-orange-50 dark:hover:bg-orange-900/30 hover:text-orange-600 dark:hover:text-orange-400 transition-all hover:scale-110 flex items-center justify-center border border-slate-200 dark:border-slate-600 shadow-sm">
                                <span class="material-symbols-outlined">code</span>
                            </button>
                            <span
                                class="absolute left-full top-1/2 -translate-y-1/2 ml-3 px-2 py-1 bg-slate-900 text-white text-xs rounded opacity-0 group-hover:opacity-100 pointer-events-none transition-opacity whitespace-nowrap z-50">Code
                                Block</span>
                        </div>
                        <div class="h-px w-8 bg-slate-200 dark:bg-slate-700"></div>
                        <div class="tooltip-trigger relative group">
                            <button
                                class="size-10 rounded-xl bg-slate-50 dark:bg-slate-700 text-slate-400 hover:bg-slate-100 dark:hover:bg-slate-600 transition-all hover:scale-110 flex items-center justify-center border border-slate-200 dark:border-slate-600 border-dashed">
                                <span class="material-symbols-outlined">upload_file</span>
                            </button>
                            <span
                                class="absolute left-full top-1/2 -translate-y-1/2 ml-3 px-2 py-1 bg-slate-900 text-white text-xs rounded opacity-0 group-hover:opacity-100 pointer-events-none transition-opacity whitespace-nowrap z-50">Import
                                File</span>
                        </div>
                    </div>
                    <div class="flex-1 overflow-y-auto custom-scrollbar relative bg-slate-50 dark:bg-dark-bg">
                        <div class="absolute inset-0 z-0 opacity-40 canvas-bg pointer-events-none"></div>
                        <div class="max-w-4xl mx-auto p-8 lg:p-12 space-y-6 relative z-10 pb-32">
                            <div
                                class="bg-white/80 dark:bg-dark-card/80 backdrop-blur-sm border border-slate-200 dark:border-slate-700 rounded-2xl p-6 shadow-sm mb-8 animate-fade-in-up">
                                <div class="flex items-start justify-between">
                                    <div>
                                        <h2 class="text-xl font-bold text-slate-900 dark:text-white">Curriculum
                                            Structure</h2>
                                        <p class="text-sm text-slate-500 dark:text-slate-400 mt-1">Drag and drop modules
                                            to reorganize. Click to expand and edit lessons.</p>
                                    </div>
                                    <button id="btn-edit-course"
                                        class="text-sm font-medium text-blue-600 dark:text-blue-400 hover:underline">Edit
                                        Course Details</button>
                                </div>
                            </div>

                            <!-- Dynamic Content Container -->
                            <div id="course-content-area">
                                <!-- Modules will be injected here by JS -->
                            </div>

                            <div id="btn-add-module-dropzone"
                                class="h-24 border-2 border-dashed border-slate-300 dark:border-slate-700 rounded-xl flex items-center justify-center text-slate-400 bg-slate-50/50 dark:bg-dark-card/30 cursor-pointer hover:bg-slate-100 dark:hover:bg-slate-800 transition-colors">
                                <span class="text-sm">Drop new module here (or click to add)</span>
                            </div>
                        </div>
                    </div>
                    <div class="absolute bottom-8 right-8 z-50 group flex flex-col items-end gap-3">
                        <div
                            class="mb-2 space-y-2 opacity-0 group-hover:opacity-100 translate-y-4 group-hover:translate-y-0 transition-all duration-300 invisible group-hover:visible origin-bottom-right">
                            <button class="flex items-center justify-end gap-3 w-max ml-auto">
                                <span
                                    class="bg-white dark:bg-dark-card px-2 py-1 rounded shadow text-xs font-medium text-slate-700 dark:text-slate-200">Generate
                                    Quiz</span>
                                <div
                                    class="size-10 rounded-full bg-white dark:bg-dark-card text-purple-600 shadow-lg flex items-center justify-center hover:bg-purple-50 dark:hover:bg-slate-700 transition-colors">
                                    <span class="material-symbols-outlined">quiz</span>
                                </div>
                            </button>
                            <button class="flex items-center justify-end gap-3 w-max ml-auto">
                                <span
                                    class="bg-white dark:bg-dark-card px-2 py-1 rounded shadow text-xs font-medium text-slate-700 dark:text-slate-200">Summarize
                                    Module</span>
                                <div
                                    class="size-10 rounded-full bg-white dark:bg-dark-card text-blue-600 shadow-lg flex items-center justify-center hover:bg-blue-50 dark:hover:bg-slate-700 transition-colors">
                                    <span class="material-symbols-outlined">summarize</span>
                                </div>
                            </button>
                            <button class="flex items-center justify-end gap-3 w-max ml-auto">
                                <span
                                    class="bg-white dark:bg-dark-card px-2 py-1 rounded shadow text-xs font-medium text-slate-700 dark:text-slate-200">Create
                                    Slides</span>
                                <div
                                    class="size-10 rounded-full bg-white dark:bg-dark-card text-pink-600 shadow-lg flex items-center justify-center hover:bg-pink-50 dark:hover:bg-slate-700 transition-colors">
                                    <span class="material-symbols-outlined">co_present</span>
                                </div>
                            </button>
                        </div>
                        <button
                            class="relative h-14 pl-5 pr-6 rounded-full bg-gradient-to-r from-blue-600 to-indigo-600 text-white shadow-xl shadow-blue-500/30 flex items-center gap-3 hover:scale-105 active:scale-95 transition-all">
                            <span class="material-symbols-outlined text-[24px] animate-pulse-slow">auto_awesome</span>
                            <span class="font-bold tracking-wide">AI Assistant</span>
                        </button>
                    </div>
                </div>
            </main>
        </div>
    </div>
    <script>
        // ------------------------------------------------------------------
        // CONSTANTS & UTILS
        // ------------------------------------------------------------------
        const COURSE_STORAGE_KEY = 'jetking_course_data';

        function uuid() {
            return Date.now().toString(36) + Math.random().toString(36).substr(2);
        }

        function saveCourseData() {
            const h1 = document.querySelector('header h1');
            const statusBadge = document.querySelector('header .gap-2 span');

            const courseData = {
                title: h1 ? h1.innerText : 'Untitled Course',
                status: statusBadge ? statusBadge.innerText : 'DRAFT',
                modules: []
            };

            document.querySelectorAll('.module-card').forEach(card => {
                const title = card.querySelector('h3').innerText;
                const status = card.querySelector('.rounded-full.font-medium').innerText;
                const lessons = [];

                card.querySelectorAll('.group\\/lesson').forEach(lesson => {
                    const lTitle = lesson.querySelector('.text-sm.font-semibold').innerText;
                    const lMeta = lesson.querySelector('.text-\\[10px\\]').innerText; // e.g. "Video • 10:24"
                    lessons.push({ title: lTitle, meta: lMeta });
                });

                courseData.modules.push({
                    id: card.dataset.id || uuid(),
                    title: title,
                    status: status,
                    lessons: lessons,
                    expanded: card.classList.contains('expanded')
                });
            });

            localStorage.setItem(COURSE_STORAGE_KEY, JSON.stringify(courseData));
        }

        function loadCourseData() {
            // Default Data if Storage is Empty
            const defaultData = {
                title: "Advanced AI Architecture",
                status: "DRAFT",
                modules: [
                    {
                        id: uuid(),
                        title: "Module 1: Introduction to AI Architecture",
                        status: "Published",
                        expanded: false,
                        lessons: [
                            { title: "1.1 Core Concepts", meta: "Video • 15:00" },
                            { title: "1.2 History", meta: "Article • 10 min" }
                        ]
                    },
                    {
                        id: uuid(),
                        title: "Module 2: Neural Networks Deep Dive",
                        status: "Drafting",
                        expanded: true,
                        lessons: [
                            { title: "2.1 Understanding Perceptrons", meta: "Video • 10:24" },
                            { title: "2.2 The Activation Function", meta: "Article • 5 min read" },
                            { title: "2.3 Checkpoint Quiz", meta: "Quiz • 5 Questions" }
                        ]
                    }
                ]
            };

            let data = localStorage.getItem(COURSE_STORAGE_KEY);
            let parsed = defaultData;

            if (data) {
                try {
                    parsed = JSON.parse(data);
                } catch (e) {
                    console.error("Failed to load course data", e);
                }
            }

            // Restore Header
            if (parsed.title) document.querySelector('header h1').innerText = parsed.title;
            if (parsed.status) document.querySelector('header .gap-2 span').innerText = parsed.status;

            // Restore Modules
            const container = document.getElementById('course-content-area');
            container.innerHTML = ''; // prevent accumulation on re-calls if any

            if (parsed.modules && parsed.modules.length > 0) {
                parsed.modules.forEach(mod => {
                    const moduleEl = createModuleElement(mod);
                    container.appendChild(moduleEl);
                });
            }
        }

        // ------------------------------------------------------------------
        // TEMPLATES & CREATORS
        // ------------------------------------------------------------------
        function createModuleElement(data) {
            const id = data.id || uuid();
            const div = document.createElement('div');
            // Base classes
            div.className = `module-card bg-white dark:bg-dark-card rounded-xl border border-slate-200 dark:border-slate-700 shadow-sm overflow-hidden group mb-4`;
            if (data.expanded) div.classList.add('expanded', 'border-2', 'border-blue-500/30');
            div.dataset.id = id;
            div.setAttribute('draggable', 'true');

            // Header color based on status (simplified logic)
            const statusClass = (data.status || 'Draft') === 'Published'
                ? 'bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400'
                : 'bg-amber-100 text-amber-700 dark:bg-amber-900/30 dark:text-amber-400';

            // Safe lesson count
            const lessonCount = data.lessons ? data.lessons.length : 0;

            div.innerHTML = `
                <div class="p-4 flex items-center gap-4 cursor-pointer hover:bg-slate-50 dark:hover:bg-slate-800/50 transition-colors header-row">
                    <div class="drag-handle text-slate-400 hover:text-slate-600 cursor-grab p-1">
                        <span class="material-symbols-outlined">drag_indicator</span>
                    </div>
                    <div class="flex-1">
                        <div class="flex items-center gap-2">
                            <h3 class="font-bold text-slate-900 dark:text-white">${data.title}</h3>
                            <span class="text-xs px-2 py-0.5 rounded-full font-medium ${statusClass}">${data.status || 'Draft'}</span>
                        </div>
                        <p class="text-xs text-slate-500 mt-0.5">${lessonCount} Lessons</p>
                    </div>
                    <div class="flex items-center gap-2">
                        <button class="p-2 text-slate-400 hover:text-blue-500 transition-colors btn-edit-module">
                            <span class="material-symbols-outlined">edit</span>
                        </button>
                        <button class="p-2 text-slate-400 hover:text-red-500 transition-colors btn-delete-module">
                            <span class="material-symbols-outlined">delete</span>
                        </button>
                        <button class="p-2 text-slate-400 hover:text-slate-600 transition-colors btn-toggle">
                            <span class="material-symbols-outlined">${data.expanded ? 'expand_less' : 'expand_more'}</span>
                        </button>
                    </div>
                </div>
                <div class="module-content ${data.expanded ? '' : 'hidden'}">
                     <div class="overflow-hidden">
                        <div class="p-4 space-y-3 bg-slate-50/50 dark:bg-dark-surface/30 lesson-list">
                             <!-- Lessons go here -->
                        </div>
                        <div class="p-3 text-center">
                            <button class="text-sm text-blue-600 font-medium hover:underline btn-add-lesson">+ Add Lesson Content</button>
                        </div>
                     </div>
                </div>
            `;

            // Populate Lessons
            const lessonList = div.querySelector('.lesson-list');
            if (data.lessons) {
                data.lessons.forEach(l => {
                    lessonList.appendChild(createLessonElement(l));
                });
            }

            attachModuleEvents(div);
            return div;
        }

        function createLessonElement(data) {
            const div = document.createElement('div');
            div.className = "flex items-center gap-3 p-3 bg-white dark:bg-dark-card border border-slate-200 dark:border-slate-700 rounded-lg shadow-sm group/lesson hover:border-blue-300 dark:hover:border-blue-600 transition-all cursor-pointer";

            // Icon based on meta (naive)
            let icon = 'smart_display'; // default video
            let iconBg = 'bg-purple-100 dark:bg-purple-900/30 text-purple-600';

            if (data.meta && data.meta.toLowerCase().includes('quiz')) {
                icon = 'quiz';
                iconBg = 'bg-green-100 dark:bg-green-900/30 text-green-600';
            } else if (data.meta && data.meta.toLowerCase().includes('article')) {
                icon = 'description';
                iconBg = 'bg-blue-100 dark:bg-blue-900/30 text-blue-600';
            }

            div.innerHTML = `
                <span class="material-symbols-outlined text-slate-400 text-sm">drag_handle</span>
                <div class="size-8 rounded ${iconBg} flex items-center justify-center shrink-0">
                    <span class="material-symbols-outlined text-[18px]">${icon}</span>
                </div>
                <div class="flex-1">
                    <p class="text-sm font-semibold text-slate-900 dark:text-white">${data.title}</p>
                    <p class="text-[10px] text-slate-500">${data.meta || 'Video • 00:00'}</p>
                </div>
                <div class="opacity-0 group-hover/lesson:opacity-100 flex gap-1 transition-opacity">
                    <button class="p-1.5 hover:bg-slate-100 dark:hover:bg-slate-700 rounded text-slate-500 btn-edit-lesson"><span class="material-symbols-outlined text-[16px]">edit</span></button>
                    <button class="p-1.5 hover:bg-red-50 dark:hover:bg-red-900/30 rounded text-red-500 btn-delete-lesson"><span class="material-symbols-outlined text-[16px]">delete</span></button>
                </div>
            `;

            // Attach Lesson Events
            div.querySelector('.btn-delete-lesson').addEventListener('click', (e) => {
                e.stopPropagation();
                if (confirm("Delete this lesson?")) {
                    div.remove();
                    saveCourseData();
                }
            });
            div.querySelector('.btn-edit-lesson').addEventListener('click', (e) => {
                e.stopPropagation();
                const newTitle = prompt("Edit Lesson Title:", data.title);
                if (newTitle) {
                    div.querySelector('p.font-semibold').innerText = newTitle;
                    saveCourseData();
                }
            });

            return div;
        }

        function attachModuleEvents(moduleEl) {
            // Expand/Collapse
            moduleEl.querySelector('.header-row').addEventListener('click', (e) => {
                if (e.target.closest('button') || e.target.closest('.drag-handle')) return;
                toggleModule(moduleEl);
            });
            moduleEl.querySelector('.btn-toggle').addEventListener('click', (e) => {
                e.stopPropagation();
                toggleModule(moduleEl);
            });

            // Edit Module
            moduleEl.querySelector('.btn-edit-module').addEventListener('click', (e) => {
                e.stopPropagation();
                const h3 = moduleEl.querySelector('h3');
                const newTitle = prompt("Enter Module Name:", h3.innerText);
                if (newTitle) {
                    h3.innerText = newTitle;
                    saveCourseData();
                }
            });

            // Delete Module
            moduleEl.querySelector('.btn-delete-module').addEventListener('click', (e) => {
                e.stopPropagation();
                if (confirm("Delete entire module?")) {
                    moduleEl.remove();
                    saveCourseData();
                }
            });

            // Add Lesson
            moduleEl.querySelector('.btn-add-lesson').addEventListener('click', () => {
                const title = prompt("Lesson Title:", "New Lesson");
                if (title) {
                    const type = prompt("Type? (Video/Article/Quiz)", "Video");
                    const list = moduleEl.querySelector('.lesson-list');
                    list.appendChild(createLessonElement({ title: title, meta: `${type} • 00:00` }));
                    saveCourseData();
                }
            });

            // Drag Events (Visual)
            moduleEl.addEventListener('dragstart', () => moduleEl.classList.add('opacity-50'));
            moduleEl.addEventListener('dragend', () => {
                moduleEl.classList.remove('opacity-50');
                saveCourseData(); // In real implementation, we would detect index change here
            });
        }

        function toggleModule(el) {
            const content = el.querySelector('.module-content');
            const icon = el.querySelector('.btn-toggle span');
            el.classList.toggle('expanded');
            if (el.classList.contains('expanded')) {
                content.classList.remove('hidden');
                icon.innerText = 'expand_less';
                el.classList.add('border-2', 'border-blue-500/30');
            } else {
                content.classList.add('hidden');
                icon.innerText = 'expand_more';
                el.classList.remove('border-2', 'border-blue-500/30');
            }
            saveCourseData();
        }

        // ------------------------------------------------------------------
        // INITIALIZATION
        // ------------------------------------------------------------------
        document.addEventListener('DOMContentLoaded', () => {
            loadCourseData();

            // Mobile Sidebar
            const mobileMenuBtn = document.querySelector('.lg\\:hidden button');
            const sidebar = document.querySelector('aside');
            if (mobileMenuBtn && sidebar) {
                mobileMenuBtn.addEventListener('click', (e) => {
                    e.stopPropagation();
                    sidebar.classList.toggle('hidden');
                    sidebar.classList.add('absolute', 'top-0', 'left-0', 'z-50', 'bg-white', 'h-full');
                });
            }

            // Global "Build" Button
            const buildBtn = document.getElementById('btn-build');
            if (buildBtn) {
                buildBtn.addEventListener('click', () => {
                    const courseName = prompt("Enter New Course Name:");
                    if (courseName) {
                        document.querySelector('header h1').innerText = courseName;
                        // Clear modules
                        const container = document.getElementById('course-content-area');
                        container.innerHTML = '';
                        // add one empty module
                        const newMod = createModuleElement({
                            title: "Introduction",
                            status: 'Draft',
                            lessons: [],
                            expanded: true
                        });
                        container.appendChild(newMod);
                        saveCourseData();
                    }
                });
            }

            // Edit Course Details
            const editCourseBtn = document.getElementById('btn-edit-course');
            if (editCourseBtn) {
                editCourseBtn.addEventListener('click', () => {
                    const h1 = document.querySelector('header h1');
                    const statusBadge = document.querySelector('header .gap-2 span');
                    const newTitle = prompt("Edit Course Title:", h1.innerText);
                    const newStatus = prompt("Edit Status:", statusBadge.innerText);
                    if (newTitle && newStatus) {
                        h1.innerText = newTitle;
                        statusBadge.innerText = newStatus;
                        saveCourseData();
                    }
                });
            }

            // Add New Module Button (Both Timeline and Dropzone)
            const addModuleHandlers = () => {
                const title = prompt("New Module Title:", "New Module");
                if (title) {
                    const container = document.getElementById('course-content-area');
                    const newMod = createModuleElement({
                        title: title,
                        status: 'Draft',
                        lessons: [],
                        expanded: true
                    });
                    container.appendChild(newMod);
                    saveCourseData();
                }
            };

            const timelineAddBtn = document.getElementById('btn-add-module-link');
            if (timelineAddBtn) timelineAddBtn.addEventListener('click', addModuleHandlers);

            const dropzoneAddBtn = document.getElementById('btn-add-module-dropzone');
            if (dropzoneAddBtn) dropzoneAddBtn.addEventListener('click', addModuleHandlers);

            // Publish Interaction
            const publishBtn = document.querySelector('.btn-publish');
            if (publishBtn) {
                publishBtn.addEventListener('click', () => {
                    if (confirm("Publish this course? Status will be updated to Published.")) {
                        const badge = document.querySelector('header .gap-2 span');
                        badge.innerText = 'PUBLISHED';
                        badge.className = 'px-2 py-0.5 rounded text-[10px] font-bold bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400 border border-green-200 dark:border-green-800';

                        // Update all modules/lessons logic could go here too

                        saveCourseData();

                        // Visual Feedback
                        const originalContent = publishBtn.innerHTML;
                        publishBtn.innerHTML = `<span class="material-symbols-outlined animate-spin">sync</span> Publishing...`;
                        setTimeout(() => {
                            publishBtn.innerHTML = `<span class="material-symbols-outlined">check</span> Published!`;
                            publishBtn.classList.remove('bg-slate-900', 'dark:bg-white', 'text-white', 'dark:text-slate-900');
                            publishBtn.classList.add('bg-green-600', 'text-white');
                            setTimeout(() => {
                                publishBtn.innerHTML = originalContent;
                                publishBtn.classList.add('bg-slate-900', 'dark:bg-white', 'text-white', 'dark:text-slate-900');
                                publishBtn.classList.remove('bg-green-600');
                            }, 2000);
                        }, 800);
                    }
                });
            }

            // AI FAB Toggle
            const aiBtn = document.querySelector('button.relative.h-14');
            const aiMenu = document.querySelector('.absolute.bottom-8.right-8 .invisible');

            if (aiBtn && aiMenu) {
                aiBtn.addEventListener('click', () => {
                    aiMenu.classList.toggle('invisible');
                    aiMenu.classList.toggle('opacity-0');
                    aiMenu.classList.toggle('translate-y-4');
                });
            }

            // AI Menu Items
            if (aiMenu) {
                const buttons = aiMenu.querySelectorAll('button');
                buttons.forEach(btn => {
                    btn.addEventListener('click', () => {
                        const text = btn.innerText;
                        if (text.includes('Generate Quiz')) {
                            const container = document.getElementById('course-content-area');
                            const newMod = createModuleElement({
                                title: "AI Generated Quiz: Neural Networks",
                                status: 'Draft',
                                expanded: true,
                                lessons: [
                                    { title: "Concept Check 1", meta: "Quiz • 5 Qs" },
                                    { title: "Network Architecture", meta: "Quiz • 10 Qs" }
                                ]
                            });
                            container.appendChild(newMod);
                            saveCourseData();
                            alert("AI has generated a new Quiz Module for you!");
                        } else if (text.includes('Summarize')) {
                            alert("AI Summary: This course effectively covers the fundamentals of AI Architecture with a strong focus on Neural Networks.");
                        } else if (text.includes('Slides')) {
                            alert("AI is generating slides... Done! Download available in Settings.");
                        }
                        // Close menu
                        aiMenu.classList.add('invisible', 'opacity-0', 'translate-y-4');
                    });
                });
            }

            // Sidebar Builder Tools
            // Helper to add lesson to last expanded module or last module
            const addLessonToActiveModule = (type, defaultTitle) => {
                const container = document.getElementById('course-content-area');
                // Find first expanded module or just the last one
                let activeMod = container.querySelector('.module-card.expanded');
                if (!activeMod) activeMod = container.lastElementChild;

                if (activeMod) {
                    const list = activeMod.querySelector('.lesson-list');
                    // Create appropriate meta based on type
                    let meta = "Video • 00:00";
                    if (type === 'Article') meta = "Article • 5 min read";
                    if (type === 'Quiz') meta = "Quiz • 3 Questions";
                    if (type === 'Code') meta = "Code • Challenge";

                    list.appendChild(createLessonElement({ title: defaultTitle, meta: meta }));
                    saveCourseData();

                    // Ensure it's expanded so user sees it
                    if (!activeMod.classList.contains('expanded')) toggleModule(activeMod);

                } else {
                    alert("Please add a module first!");
                }
            };

            const sidebarTools = document.querySelectorAll('aside .tooltip-trigger button');
            sidebarTools.forEach(btn => {
                const iconElement = btn.querySelector('.material-symbols-outlined');
                if (!iconElement) return;

                const icon = iconElement.textContent.trim();

                // Use onclick to avoid duplicate listeners if script runs twice
                btn.onclick = (e) => {
                    e.stopPropagation(); // Stop bubbling

                    if (icon === 'description') addLessonToActiveModule('Article', 'New Text Lesson');
                    else if (icon === 'smart_display') addLessonToActiveModule('Video', 'New Video Lesson');
                    else if (icon === 'quiz') addLessonToActiveModule('Quiz', 'New Quiz');
                    else if (icon === 'code') addLessonToActiveModule('Code', 'Coding Challenge');
                    else if (icon === 'upload_file') {
                        // Mock file input
                        const input = document.createElement('input');
                        input.type = 'file';
                        input.onchange = ev => {
                            if (ev.target.files && ev.target.files[0]) {
                                alert(`Importing ${ev.target.files[0].name}... Done.`);
                            }
                        };
                        input.click();
                    }
                };
            });

            // Header Buttons
            const headerBtns = document.querySelectorAll('header button');
            headerBtns.forEach(btn => {
                const text = btn.innerText;
                if (text === 'Preview') {
                    btn.addEventListener('click', () => {
                        document.body.classList.toggle('preview-mode');
                        const isPreview = document.body.classList.contains('preview-mode');
                        btn.innerText = isPreview ? 'Edit Mode' : 'Preview';
                        btn.classList.toggle('bg-blue-100');

                        // Simple visual toggle for preview
                        if (isPreview) {
                            alert("Entering Preview Mode (Drag handles and Edit buttons will be hidden)");
                            // We could inject a style tag to actually hide them, or just rely on the alert for the mock
                            const style = document.createElement('style');
                            style.id = 'preview-style';
                            style.innerHTML = `.preview-mode .drag-handle, .preview-mode .btn-edit-module, .preview-mode .btn-delete-module, .preview-mode .btn-add-lesson, .preview-mode .btn-edit-lesson, .preview-mode .btn-delete-lesson { display: none !important; }`;
                            document.head.appendChild(style);
                        } else {
                            const style = document.getElementById('preview-style');
                            if (style) style.remove();
                        }
                    });
                }
                if (text === 'Settings') {
                    btn.addEventListener('click', () => alert("Course Settings Modal would open here.\n- Theme\n- Access Control\n- Certificates"));
                }
            });
        });

    </script>
</body>

</html>